<html><head><META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Chapter&nbsp;13.&nbsp;More about Tasks</title><link href="style.css" rel="stylesheet" type="text/css"><meta content="DocBook XSL Stylesheets V1.75.2" name="generator"><link rel="home" href="userguide.html" title="Gradle"><link rel="up" href="userguide.html" title="Gradle"><link rel="prev" href="project_and_task_api.html" title="Chapter&nbsp;12.&nbsp;The Project and Task API"><link rel="next" href="working_with_files.html" title="Chapter&nbsp;14.&nbsp;Working With Files"></head><body><div class="navheader"><div><div class="navbar"><a href="project_and_task_api.html" title="Chapter&nbsp;12.&nbsp;The Project and Task API">Previous</a><span>|</span><a href="working_with_files.html" title="Chapter&nbsp;14.&nbsp;Working With Files">Next</a><span>|</span><a href="userguide.html">Contents</a></div></div></div><div class="chapter" title="Chapter&nbsp;13.&nbsp;More about Tasks"><div class="titlepage"><div><div><h1 xmlns:xslthl="http://xslthl.sf.net"><a name="more_about_tasks"></a>Chapter&nbsp;13.&nbsp;More about Tasks</h1></div></div></div><p>In the introductory tutorial (<a class="xref" href="tutorial_using_tasks.html" title="Chapter&nbsp;4.&nbsp;Build Script Basics">Chapter&nbsp;4, <i>Build Script Basics</i></a>) you have learned how to
        create simple tasks. You have also learned how to add additional behavior to these tasks later on. And you have
        learned how to create dependencies between tasks. This was all about simple tasks. But Gradle takes the concept
        of tasks further. Gradle supports <em class="firstterm">enhanced tasks</em>, that is, tasks which have their own
        properties and methods. This is really different to what you are used to with Ant targets. Such enhanced tasks are
        either provided by you or are provided by Gradle.
    </p><div class="section" title="13.1.&nbsp;Defining tasks"><div class="titlepage"><div><div><h2 class="title"><a name="N10AFE"></a>13.1.&nbsp;Defining tasks</h2></div></div></div><p>We have already seen how to define tasks using a keyword style in <a class="xref" href="tutorial_using_tasks.html" title="Chapter&nbsp;4.&nbsp;Build Script Basics">Chapter&nbsp;4, <i>Build Script Basics</i></a>.
            There are a few variations on this style, which you may need to use in certain situations. For example,
            the keyword style does not work in expressions.
        </p><div class="example"><a name="defineAsExpression"></a><p class="title"><b>Example&nbsp;13.1.&nbsp;Defining tasks</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task(hello) &lt;&lt; {
    println <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">"hello"</span>
}

task(copy, type: Copy) {
    from(file(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'srcDir'</span>))
    into(buildDir)
}</pre></div></div><br class="example-break"><p>You can also use strings for the task names:</p><div class="example"><a name="defineUsingStringTaskNames"></a><p class="title"><b>Example&nbsp;13.2.&nbsp;Defining tasks - using strings</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'hello'</span>) &lt;&lt;
{
    println <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">"hello"</span>
}

task(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'copy'</span>, type: Copy) {
    from(file(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'srcDir'</span>))
    into(buildDir)
}</pre></div></div><br class="example-break"><p>There is an alternative syntax for defining tasks, which you may prefer to use:</p><div class="example"><a name="addToTaskContainer"></a><p class="title"><b>Example&nbsp;13.3.&nbsp;Defining tasks with alternative syntax</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">tasks.add(name: <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'hello'</span>) &lt;&lt; {
    println <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">"hello"</span>
}

tasks.add(name: <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'copy'</span>, type: Copy) {
    from(file(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'srcDir'</span>))
    into(buildDir)
}</pre></div></div><br class="example-break"><p>Here we add tasks to the <code class="literal">tasks</code> collection. Have a look at
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/TaskContainer.html" target="_top">
          <code class="classname">TaskContainer</code>
        </a> for more variations of the <code class="literal">add()</code>
            method.</p></div><div class="section" title="13.2.&nbsp;Locating tasks"><div class="titlepage"><div><div><h2 class="title"><a name="N10B3D"></a>13.2.&nbsp;Locating tasks</h2></div></div></div><p>You often need to locate the tasks that you have defined in the build file, for example, to configure them
            or use them for dependencies. There are a number of ways you can do this. Firstly, each task is available as
            a property of the project, using the task name as the property name:
        </p><div class="example"><a name="accessAsProperty"></a><p class="title"><b>Example&nbsp;13.4.&nbsp;Accessing tasks as properties</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task hello

println hello.name
println project.hello.name</pre></div></div><br class="example-break"><p>Tasks are also available through the <code class="literal">tasks</code> collection.</p><div class="example"><a name="accessFromTaskContainer"></a><p class="title"><b>Example&nbsp;13.5.&nbsp;Accessing tasks via tasks collection</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task hello

println tasks.hello.name
println tasks[<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'hello'</span>].name</pre></div></div><br class="example-break"><p>You can access tasks from any project using the task's path using the <code class="literal">tasks.getByPath()</code>
            method. You can call the <code class="literal">getByPath()</code> method with a task name, or a relative path, or an
            absolute path.</p><div class="example"><a name="accessUsingPath"></a><p class="title"><b>Example&nbsp;13.6.&nbsp;Accessing tasks by path</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">project(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">':projectA'</span>) {
    task hello
}

task hello

println tasks.getByPath(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'hello'</span>).path
println tasks.getByPath(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">':hello'</span>).path
println tasks.getByPath(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'projectA:hello'</span>).path
println tasks.getByPath(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">':projectA:hello'</span>).path</pre><p>Output of <strong class="userinput"><code>gradle -q hello</code></strong>
        </p><pre class="screen">&gt; gradle -q hello
:hello
:hello
:projectA:hello
:projectA:hello</pre></div></div><br class="example-break"><p>Have a look at <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/TaskContainer.html" target="_top">
          <code class="classname">TaskContainer</code>
        </a> for more options for locating tasks.</p></div><div class="section" title="13.3.&nbsp;Configuring tasks"><div class="titlepage"><div><div><h2 class="title"><a name="sec:configuring_tasks"></a>13.3.&nbsp;Configuring tasks</h2></div></div></div><p>As an example, let's look at the <code class="classname">Copy</code> task provided by Gradle. To create a
            <code class="classname">Copy</code> task for your build, you can declare in your build script:
            <sup>[<a href="#ftn.N10B8F" name="N10B8F" class="footnote">11</a>]</sup>
        </p><div class="example"><a name="declareTask"></a><p class="title"><b>Example&nbsp;13.7.&nbsp;Creating a copy task</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task myCopy(type: Copy)</pre></div></div><br class="example-break"><p>This creates a copy task with no default behavior.
            The task can be configured using its API (see <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/Copy.html" target="_top">
          <code class="classname">Copy</code>
        </a>).
			The following examples show several different ways to achieve the same configuration.
        </p><div class="example"><a name="configureUsingVar"></a><p class="title"><b>Example&nbsp;13.8.&nbsp;Configuring a task - various ways</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">Copy myCopy = task(myCopy, type: Copy)
myCopy.from <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'resources'</span>
myCopy.into <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'target'</span>
myCopy.include(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'**/*.txt'</span>, <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'**/*.xml'</span>, <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'**/*.properties'</span>)</pre></div></div><br class="example-break"><p>This is similar to the way we would normally configure objects in Java. You have to repeat the context
            (<code class="literal">myCopy</code>) in the configuration statement every time. This is a redundancy and not very
            nice to read.
        </p><p>There is a more convenient way of doing this.
        </p><div class="example"><a name="configureUsingLiterateStyle"></a><p class="title"><b>Example&nbsp;13.9.&nbsp;Configuring a task - fluent interface</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task(myCopy, type: Copy)
    .from(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'resources'</span>)
    .into(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'target'</span>)
    .include(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'**/*.txt'</span>, <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'**/*.xml'</span>, <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'**/*.properties'</span>)</pre></div></div><br class="example-break"><p>You might know this approach from the Hibernates Criteria Query API or JMock. Of course the API of a task
            has to support this. The <code class="literal">from</code>, <code class="literal">to</code> and <code class="literal">include</code>
            methods all return an object that may be used to chain to additional configuration methods. Gradle's build-in tasks usually
            support this configuration style.
        </p><p>But there is yet another way of configuring a task. It also preserves the context and it is arguably the
            most readable. It is usually our favorite.
        </p><div class="example"><a name="configureUsingClosure"></a><p class="title"><b>Example&nbsp;13.10.&nbsp;Configuring a task - with closure</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task myCopy(type: Copy)

myCopy {
   from <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'resources'</span>
   into <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'target'</span>
   include(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'**/*.txt'</span>, <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'**/*.xml'</span>, <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'**/*.properties'</span>)
}</pre></div></div><br class="example-break"><p>This works for <span class="emphasis"><em>any</em></span> task. Line 3 of the example is just a shortcut for the
            <code class="literal">tasks.getByName()</code> method. It is important to note that if you pass a closure to the
            <code class="literal">getByName()</code> method, this closure is applied to <span class="emphasis"><em>configure</em></span> the task.
        </p><p>There is a slightly different ways of doing this.</p><div class="example"><a name="configureUsingConfigure"></a><p class="title"><b>Example&nbsp;13.11.&nbsp;Configuring a task - with configure() method</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task myCopy(type: Copy)

myCopy.configure {
   from(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'source'</span>)
   into(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'target'</span>)
   include(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'**/*.txt'</span>, <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'**/*.xml'</span>, <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'**/*.properties'</span>)
}</pre></div></div><br class="example-break"><p>Every task has a <code class="literal">configure()</code> method, which you can pass a closure for configuring the task.
            Gradle uses this style for configuring objects in many places, not just for tasks.
        </p><p>You can also use a configuration closure when you define a task.</p><div class="example"><a name="defineAndConfigure"></a><p class="title"><b>Example&nbsp;13.12.&nbsp;Defining a task with closure</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task copy(type: Copy) {
   from <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'resources'</span>
   into <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'target'</span>
   include(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'**/*.txt'</span>, <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'**/*.xml'</span>, <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'**/*.properties'</span>)
}</pre></div></div><br class="example-break"></div><div class="section" title="13.4.&nbsp;Adding dependencies to a task"><div class="titlepage"><div><div><h2 class="title"><a name="sec:adding_dependencies_to_tasks"></a>13.4.&nbsp;Adding dependencies to a task</h2></div></div></div><p>There are several ways you can define the dependencies of a task. In
            <a class="xref" href="tutorial_using_tasks.html#sec:task_dependencies" title="4.3.&nbsp;Task dependencies">Section&nbsp;4.3, &ldquo;Task dependencies&rdquo;</a>
            you were introduced to defining dependencies using task names. Task names can refer to tasks in the same
            project as the task, or to tasks in other projects. To refer to a task in another project, you prefix the
            name of the task with the path of the project it belongs to. Below is an example which adds a dependency
            from
            <code class="literal">projectA:taskX</code>
            to
            <code class="literal">projectB:taskY</code>:
        </p><div class="example"><a name="addDependencyUsingPath"></a><p class="title"><b>Example&nbsp;13.13.&nbsp;Adding dependency on task from another project</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">project(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'projectA'</span>) {
    task taskX(dependsOn: <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">':projectB:taskY'</span>) &lt;&lt; {
        println <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'taskX'</span>
    }
}

project(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'projectB'</span>) {
    task taskY &lt;&lt; {
        println <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'taskY'</span>
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q taskX</code></strong>
        </p><pre class="screen">&gt; gradle -q taskX
taskY
taskX</pre></div></div><br class="example-break"><p>Instead of using a task name, you can define a dependency using a
            <code class="classname">Task</code> object, as shown in this example:
        </p><div class="example"><a name="addDependencyUsingTask"></a><p class="title"><b>Example&nbsp;13.14.&nbsp;Adding dependency using task object</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task taskX &lt;&lt; {
    println <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'taskX'</span>
}

task taskY &lt;&lt; {
    println <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'taskY'</span>
}

taskX.dependsOn taskY</pre><p>Output of <strong class="userinput"><code>gradle -q taskX</code></strong>
        </p><pre class="screen">&gt; gradle -q taskX
taskY
taskX</pre></div></div><br class="example-break"><p>For more advanced uses, you can define a task dependency using a closure. When evaluated, the closure is
            passed the task whose dependencies are being calculated. The closure should return a single
            <code class="classname">Task</code> or collection of <code class="classname">Task</code> objects, which are then treated
            as dependencies of the task. The following example adds a dependency from <code class="literal">taskX</code>
            to all the tasks in the project whose name starts with <code class="literal">lib</code>:
        </p><div class="example"><a name="addDependencyUsingClosure"></a><p class="title"><b>Example&nbsp;13.15.&nbsp;Adding dependency using closure</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task taskX &lt;&lt; {
    println <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'taskX'</span>
}

taskX.dependsOn {
    tasks.findAll { task -&gt; task.name.startsWith(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'lib'</span>) }
}

task lib1 &lt;&lt; {
    println <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'lib1'</span>
}

task lib2 &lt;&lt; {
    println <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'lib2'</span>
}

task notALib &lt;&lt; {
    println <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'notALib'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q taskX</code></strong>
        </p><pre class="screen">&gt; gradle -q taskX
lib1
lib2
taskX</pre></div></div><br class="example-break"><p>For more information about task dependencies, see the <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/Task.html" target="_top">
          <code class="classname">Task</code>
        </a> API.</p></div><div class="section" title="13.5.&nbsp;Adding a description to a task"><div class="titlepage"><div><div><h2 class="title"><a name="N10C73"></a>13.5.&nbsp;Adding a description to a task</h2></div></div></div><p>You can add a description to your task. This description is for example displayed when executing
            <code class="code">gradle -t</code>.
        </p><div class="example"><a name="describeTask"></a><p class="title"><b>Example&nbsp;13.16.&nbsp;Adding a description to a task</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task copy(type: Copy) {
   description = <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'Copies the resource directory to the target directory.'</span>
   from <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'resources'</span>
   into <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'target'</span>
   include(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'**/*.txt'</span>, <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'**/*.xml'</span>, <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'**/*.properties'</span>)
}</pre></div></div><br class="example-break"></div><div class="section" title="13.6.&nbsp;Replacing tasks"><div class="titlepage"><div><div><h2 class="title"><a name="N10C87"></a>13.6.&nbsp;Replacing tasks</h2></div></div></div><p>Sometimes you want to replace a task. For example if you want to exchange a task added by the Java Plugin
            with a custom task of a different type. You can achieve this with:
        </p><div class="example"><a name="replaceTask"></a><p class="title"><b>Example&nbsp;13.17.&nbsp;Overwriting a task</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">task copy(type: Copy)

task copy(overwrite: true) &lt;&lt; {
    println(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'I am the new one.'</span>)
}</pre><p>Output of <strong class="userinput"><code>gradle -q copy</code></strong>
        </p><pre class="screen">&gt; gradle -q copy
I am the new one.</pre></div></div><br class="example-break"><p>Here we replace a task of type <code class="literal">Copy</code> with a simple task. When creating the simple
            task, you have to set the <code class="literal">overwrite</code> property to true. Otherwise Gradle throws an
            exception, saying that a task with such a name already exists.
        </p></div><div class="section" title="13.7.&nbsp;Skipping tasks"><div class="titlepage"><div><div><h2 class="title"><a name="N10CA7"></a>13.7.&nbsp;Skipping tasks</h2></div></div></div><p>Gradle offers multiple ways to skip the execution of a task.</p><div class="section" title="13.7.1.&nbsp;Using a predicate"><div class="titlepage"><div><div><h3 class="title"><a name="N10CAC"></a>13.7.1.&nbsp;Using a predicate</h3></div></div></div><p>You can use the <code class="literal">onlyIf()</code> method to attach a predicate to a task. The task's
                actions are only executed if the predicate evaluates to true. You implement the predicate as a closure.
                The closure is passed the task as a parameter, and should return true if the task should execute
                and false if the task should be skipped. The predicate is evaluated just before the task is due
                to be executed.
                </p><div class="example"><a name="taskOnlyIf"></a><p class="title"><b>Example&nbsp;13.18.&nbsp;Skipping a task using a predicate</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">task hello &lt;&lt; {
    println <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'hello world'</span>
}

hello.onlyIf { !project.hasProperty(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'skipHello'</span>) }</pre><p>Output of <strong class="userinput"><code>gradle hello -PskipHello</code></strong>
          </p><pre class="screen">&gt; gradle hello -PskipHello
:hello SKIPPED as onlyIf is false

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"></div><div class="section" title="13.7.2.&nbsp;Using StopExecutionException"><div class="titlepage"><div><div><h3 class="title"><a name="N10CC7"></a>13.7.2.&nbsp;Using StopExecutionException</h3></div></div></div><p>If the rules for skipping a task can't be expressed with predicate, you can use the
            <a class="ulink" href="http://www.gradle.org/0.8/docs/javadoc/org/gradle/api/tasks/StopExecutionException.html" target="_top">
            <code class="classname">StopExecutionException</code>
          </a>. If this exception is thrown by an action,
            the further execution of this action as well as the execution of
            any following action of this task is skipped. The build continues with executing the next task.
        </p><div class="example"><a name="stopExecutionException"></a><p class="title"><b>Example&nbsp;13.19.&nbsp;Skipping tasks with StopExecutionException</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">task compile &lt;&lt; {
    println <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'We are doing the compile.'</span>
}

compile.doFirst {
    <span xmlns:xslthl="http://xslthl.sf.net" class="hl-comment">// Here you would put arbitrary conditions in real life. But we use this as an integration test, so we want defined behavior.</span>
    <span xmlns:xslthl="http://xslthl.sf.net" class="hl-keyword">if</span> (true) { <span xmlns:xslthl="http://xslthl.sf.net" class="hl-keyword">throw</span> <span xmlns:xslthl="http://xslthl.sf.net" class="hl-keyword">new</span> StopExecutionException() }
}
task myTask(dependsOn: <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'compile'</span>) &lt;&lt; {
   println <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'I am not affected'</span>
}</pre><p>Output of <strong class="userinput"><code>gradle -q myTask</code></strong>
          </p><pre class="screen">&gt; gradle -q myTask
I am not affected</pre></div></div><br class="example-break"><p>This feature is helpful if you work with tasks provided by Gradle. It allows you to add
            <span class="emphasis"><em>conditional</em></span> execution of the built-in actions of such a task.
            <sup>[<a href="#ftn.N10CEB" name="N10CEB" class="footnote">12</a>]</sup>
        </p></div><div class="section" title="13.7.3.&nbsp;Enabling and disabling tasks"><div class="titlepage"><div><div><h3 class="title"><a name="N10CF5"></a>13.7.3.&nbsp;Enabling and disabling tasks</h3></div></div></div><p>Every task has also an <code class="literal">enabled</code>
            flag which defaults to <code class="literal">true</code>. Setting it to <code class="literal">false</code> prevents the
            execution of any of the task's actions.
        </p><div class="example"><a name="disableTask"></a><p class="title"><b>Example&nbsp;13.20.&nbsp;Enabling and disabling tasks</b></p><div class="example-contents"><p>
            <code class="filename">build.gradle</code>
          </p><pre class="programlisting">task disableMe &lt;&lt; {
    println <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'This should not be printed if the task is disabled.'</span>
}
disableMe.enabled = false</pre><p>Output of <strong class="userinput"><code>gradle disableMe</code></strong>
          </p><pre class="screen">&gt; gradle disableMe
:disableMe SKIPPED

BUILD SUCCESSFUL

Total time: 1 secs</pre></div></div><br class="example-break"></div></div><div class="section" title="13.8.&nbsp;Task rules"><div class="titlepage"><div><div><h2 class="title"><a name="N10D16"></a>13.8.&nbsp;Task rules</h2></div></div></div><p>Sometimes you want to have a task which behavior depends on a large or infinite number value range
            of parameters. A very nice and expressive way to provide such tasks are task rules: 
        </p><div class="example"><a name="taskRule"></a><p class="title"><b>Example&nbsp;13.21.&nbsp;Task rule</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">tasks.addRule(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">"Pattern: ping&lt;ID&gt;"</span>) { String taskName -&gt;
    <span xmlns:xslthl="http://xslthl.sf.net" class="hl-keyword">if</span> (taskName.startsWith(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">"ping"</span>)) {
        task(taskName) &lt;&lt; {
            println <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">"Pinging: "</span> + (taskName - <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'ping'</span>)
        }
    }
}</pre><p>Output of <strong class="userinput"><code>gradle -q pingServer1</code></strong>
        </p><pre class="screen">&gt; gradle -q pingServer1
Pinging: Server1</pre></div></div><br class="example-break"><p>The String parameter is used as a description for the rule. This description is shown when doing
            for example <code class="code">gradle -t</code>.
        </p><p>Rules not just work for calling tasks from the command line. You can also create dependsOn relations
            on rule based tasks:
        </p><div class="example"><a name="taskRuleDependsOn"></a><p class="title"><b>Example&nbsp;13.22.&nbsp;Dependency on rule based tasks</b></p><div class="example-contents"><p>
          <code class="filename">build.gradle</code>
        </p><pre class="programlisting">tasks.addRule(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">"Pattern: ping&lt;ID&gt;"</span>) { String taskName -&gt;
    <span xmlns:xslthl="http://xslthl.sf.net" class="hl-keyword">if</span> (taskName.startsWith(<span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">"ping"</span>)) {
        task(taskName) &lt;&lt; {
            println <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">"Pinging: "</span> + (taskName - <span xmlns:xslthl="http://xslthl.sf.net" class="hl-string">'ping'</span>)
        }
    }
}

task groupPing {
    dependsOn pingServer1, pingServer2
}</pre><p>Output of <strong class="userinput"><code>gradle -q groupPing</code></strong>
        </p><pre class="screen">&gt; gradle -q groupPing
Pinging: Server1
Pinging: Server2</pre></div></div><br class="example-break"></div><div class="section" title="13.9.&nbsp;Summary"><div class="titlepage"><div><div><h2 class="title"><a name="sec:the_idea_behind_gradle_tasks"></a>13.9.&nbsp;Summary</h2></div></div></div><p>If you are coming from Ant, such an enhanced Gradle task as <span class="emphasis"><em>Copy</em></span> looks like a mixture
            between an Ant target and an Ant task. And this is actually the case. The separation that Ant does between
            tasks and targets is not done by Gradle. The simple Gradle tasks are like Ant's targets and the enhanced
            Gradle tasks also include the Ant task aspects. All of Gradle's tasks share a common API and you can create
            dependencies between them. Such a task might be nicer to configure than an Ant task.
            It makes full use of the type system, is more expressive and easier to maintain.
        </p></div><div class="footnotes"><br><hr align="left" width="100"><div class="footnote"><p><sup>[<a href="#N10B8F" name="ftn.N10B8F" class="para">11</a>] </sup>If you use the Java Plugin, this task is automatically created and added to your project.
                </p></div><div class="footnote"><p><sup>[<a href="#N10CEB" name="ftn.N10CEB" class="para">12</a>] </sup>You might be wondering why there is neither an import for the
                    <code class="literal">StopExecutionException</code>
                    nor do we access it via its fully qualified name. The reason is, that Gradle adds a set of default imports
                    to your script. These imports are customizable (see <a class="xref" href="ide_support.html" title="Appendix&nbsp;C.&nbsp;Existing IDE Support and how to cope without it">Appendix&nbsp;C, <i>Existing IDE Support and how to cope without it</i></a>).
                </p></div></div></div><div class="navfooter"><div><div class="navbar"><a href="project_and_task_api.html" title="Chapter&nbsp;12.&nbsp;The Project and Task API">Previous</a><span>|</span><a href="working_with_files.html" title="Chapter&nbsp;14.&nbsp;Working With Files">Next</a><span>|</span><a href="userguide.html">Contents</a></div></div></div></body></html>